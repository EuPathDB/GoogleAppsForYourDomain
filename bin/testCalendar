#!/usr/bin/perl

#
# $Id$
# $URL$
#

use strict;
use FindBin;
use Data::Dumper;
use lib "$FindBin::Bin/../lib/perl";
use CalendarApp;

if (@ARGV < 2) {
	warn "testCalendar <username> <password>\n";
    exit 1;
}

my $calApp = new CalendarApp($ARGV[0], $ARGV[1], 'apidb.org');

my @cals = $calApp->retrieveAllCalendars();

for my $cal (@cals) {
   # print $cal->xml;
    print "authorName: " . $cal->calendarName . "\n";
    print "aclURL: " . $cal->aclUrl, "\n";

}

my @cals = $calApp->retrieveOwnCalendars();

for my $cal (@cals) {
   # print $cal->xml;
    print "authorName: " . $cal->calendarName . "\n";
    print "aclURL: " . $cal->aclUrl, "\n";

}

print "getting single calendar\n";
my $cal = $calApp->retrieveCalendarFromAll('yet another calendar');

print $cal->aclUrl, "\n";
    print "ACL: " . $cal->acl;

my $res = $cal->addUserToAcl('joeuser@apidb.org');
print $res->content . "\n";
#my $cals = $calApp->retrieveCalendarFromOwn();
